<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Interactive Thesis Map</title>
  <!-- Include Cytoscape.js -->
  <script src="https://cdn.jsdelivr.net/npm/cytoscape@3.20.0/dist/cytoscape.min.js"></script>
  <style>
    /* Basic styles */
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
      background-color: #f8f8f8;
    }
    #cy {
      width: 100%;
      height: 100%;
      display: block;
    }
    /* Modal overlay styles */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 1000;
    }
    .modal-overlay.active {
      display: flex;
    }
    /* Modal content box */
    .modal-content {
      background: #fff;
      border-radius: 8px;
      width: 90%;
      max-width: 600px;
      max-height: 90%;
      overflow-y: auto;
      padding: 20px;
      position: relative;
      animation: fadeIn 0.3s ease-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .modal-header {
      font-size: 1.5em;
      margin-bottom: 10px;
    }
    .modal-close {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 1.5em;
      cursor: pointer;
    }
    /* Accordion styles */
    .accordion-item {
      border-top: 1px solid #ccc;
      margin-top: 15px;
    }
    .accordion-header {
      padding: 10px;
      cursor: pointer;
      background: #eee;
      font-weight: bold;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease-out;
      padding: 0 10px;
      background: #fafafa;
    }
    .accordion-content p {
      margin: 10px 0;
    }
    .accordion-item.active .accordion-content {
      padding: 10px;
      max-height: 300px;
    }
  </style>
</head>
<body>
  <!-- Cytoscape container -->
  <div id="cy"></div>
  <!-- Modal for section details -->
  <div id="modal" class="modal-overlay">
    <div class="modal-content">
      <span class="modal-close" id="modal-close">&times;</span>
      <div id="modal-header" class="modal-header"></div>
      <div id="modal-body"></div>
    </div>
  </div>

  <script>
    /********* Modal Content Data *********/
    const sectionContent = {
      postFordism: {
        header: "üèõÔ∏è Post-Fordism & New Capitalisms", 
        concepts: [
          {
            title: "The Shift to Post-Fordism",
            summary: "Explores how deregulation and flexibility redefined labor and capital.",
            details: "Discussion on transitioning from rigid Fordist structures to more flexible, innovation-driven systems. Key references: Harvey (2005), Fischer (2010b)."
          },
          {
            title: "Emergence of the Network Human",
            summary: "Highlights the evolution of the flexible worker.",
            details: "Describes how immaterial labor and decentralized work practices give rise to the 'network human'. Key references: Jessop (1992), Hardt & Negri (2000)."
          },
          {
            title: "AI as a Catalyst",
            summary: "Examines how AI accelerates new capitalistic dynamics.",
            details: "Focuses on AI's role in driving innovation and enabling data-driven decision-making. Key references: Lee (2018), Fischer et al. (2022)."
          }
        ]
      },
      itDigital: {
        header: "üåê IT & Digital Discourse",
        concepts: [
          {
            title: "IT as a Social Field",
            summary: "Defines IT as more than just an industry.",
            details: "Explores how IT shapes societal norms and structures. Key references: Bourdieu (1990), Fischer (2010a)."
          },
          {
            title: "Narratives of Digital Progress",
            summary: "Discusses legitimizing narratives of continuous innovation.",
            details: "Examines how digital discourse promotes endless progress. Key references: Fischer (2010b), Harvey (2005)."
          },
          {
            title: "Influence of Tech Elites",
            summary: "Investigates the role of tech leaders in shaping digital narratives.",
            details: "Analyzes how influential figures drive public perception of digital innovation. Key references: Andreessen (2023), Altman (2024)."
          }
        ]
      },
      b2bSeller: {
        header: "üßë‚Äçüíº B2B IT Seller",
        concepts: [
          {
            title: "Dual Role of Sellers",
            summary: "Sellers as both advocates and adaptors.",
            details: "Examines how B2B sellers promote AI while managing its challenges. Key references: Elhajjar et al. (2023), Paschen et al. (2020)."
          },
          {
            title: "Challenges of AI Adoption",
            summary: "Addresses hurdles in integrating AI into sales.",
            details: "Focuses on practical challenges such as resistance and the need for upskilling. Key references: LinkedIn & Ipsos (2024), Dover (2022)."
          },
          {
            title: "Impact on Productivity & Relationships",
            summary: "Analyzes AI's effects on sales dynamics.",
            details: "Looks at how AI integration reshapes seller-customer interactions and performance. Key references: Yee et al. (2024), Paschen et al. (2020)."
          }
        ]
      },
      b2bSales: {
        header: "üîÑ B2B Sales Process",
        concepts: [
          {
            title: "AI-Driven Prospecting",
            summary: "Covers smarter lead scoring and targeting.",
            details: "Describes how AI streamlines the prospecting phase by effectively qualifying leads. Key references: ZoomInfo, 6sense."
          },
          {
            title: "Personalized Engagement",
            summary: "Highlights tailored sales communication.",
            details: "Discusses real-time personalization of sales interactions through AI insights. Key references: Salesloft, Outreach."
          },
          {
            title: "Optimizing Post-Sale Interactions",
            summary: "Focuses on enhanced customer retention.",
            details: "Explores how automated follow-ups and analytics improve post-sale service. Key references: Zendesk, Totango."
          }
        ]
      },
      gaps: {
        header: "üìÅ Gaps & Opportunities",
        concepts: [
          {
            title: "Research Limitations",
            summary: "Discusses the disconnect between theory and practice.",
            details: "Highlights challenges in aligning academic frameworks with real-world AI integration. Key references: Hunter (2019), Chen (2021)."
          },
          {
            title: "Managerial vs. Practitioner Perspectives",
            summary: "Explores differing views on AI's impact.",
            details: "Examines the disparity between top-down narratives and frontline experiences. Key references: Rodriguez & Peterson (2023)."
          },
          {
            title: "Future Research Directions",
            summary: "Identifies key questions for further study.",
            details: "Outlines emerging opportunities to better understand AI's transformative role. Key references: Paschen et al. (2020)."
          }
        ]
      },
      aiMaking: {
        header: "ü§ñ AI in the Making",
        concepts: [
          {
            title: "Emergence through Practice",
            summary: "Explores how AI evolves via interaction.",
            details: "Focuses on the dynamic adaptation of AI in real-world usage. Key references: Scott & Orlikowski (2025)."
          },
          {
            title: "Sociomaterial Interactions",
            summary: "Examines the interplay of tech and human practices.",
            details: "Highlights the co-construction of AI within its social context. Key references: Orlikowski (2008)."
          },
          {
            title: "Co-constructing AI",
            summary: "Describes AI as a collaborative, evolving process.",
            details: "Underlines that AI is continuously shaped by its users. Key references: Faraj et al. (2018)."
          }
        ]
      }
    };

    /********* Cytoscape Setup with Logical Flow *********/
    const cy = cytoscape({
      container: document.getElementById('cy'),
      style: [
        {
          selector: 'node',
          style: {
            'background-color': '#0074D9',
            'label': 'data(label)',
            'color': '#fff',
            'text-valign': 'center',
            'text-halign': 'center',
            'font-size': '14px',
            'width': '80px',
            'height': '80px'
          }
        },
        {
          selector: 'edge',
          style: {
            'width': 3,
            'line-color': '#ccc',
            'target-arrow-shape': 'triangle',
            'target-arrow-color': '#ccc',
            'curve-style': 'bezier'
          }
        }
      ],
      elements: {
        nodes: [
          { data: { id: 'postFordism', label: 'üëç Post-Fordism & New Capitalisms' } },
          { data: { id: 'itDigital', label: 'üíª IT & Digital Discourse' } },
          { data: { id: 'b2bSeller', label: 'üë§ B2B IT Seller' } },
          { data: { id: 'b2bSales', label: 'üìä B2B Sales Process' } },
          { data: { id: 'gaps', label: 'üîç Gaps & Opportunities' } },
          { data: { id: 'aiMaking', label: 'üåÄ AI in the Making' } }
        ],
        edges: [
          { data: { source: 'postFordism', target: 'itDigital' } },
          { data: { source: 'itDigital', target: 'b2bSeller' } },
          { data: { source: 'b2bSeller', target: 'b2bSales' } },
          { data: { source: 'b2bSales', target: 'gaps' } },
          { data: { source: 'gaps', target: 'aiMaking' } }
        ]
      },
      layout: {
        name: 'breadthfirst',
        directed: true,
        padding: 10,
        spacingFactor: 1.5,
        animate: true,
        roots: '#postFordism'
      },
      userPanningEnabled: true,
      userZoomingEnabled: true
    });

    // Enable dragging of nodes
    cy.nodes().grabify();

    /********* Modal & Accordion Functionality *********/
    const modal = document.getElementById('modal');
    const modalHeader = document.getElementById('modal-header');
    const modalBody = document.getElementById('modal-body');
    const modalClose = document.getElementById('modal-close');

    modalClose.addEventListener('click', () => modal.classList.remove('active'));
    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.classList.remove('active');
    });

    function createAccordionItem(concept) {
      const item = document.createElement('div');
      item.className = 'accordion-item';
      
      const header = document.createElement('div');
      header.className = 'accordion-header';
      header.textContent = concept.title;
      const indicator = document.createElement('span');
      indicator.textContent = '+';
      header.appendChild(indicator);
      
      const content = document.createElement('div');
      content.className = 'accordion-content';
      content.innerHTML = `<p><strong>Summary:</strong> ${concept.summary}</p>
                           <p>${concept.details}</p>`;
      
      header.addEventListener('click', () => {
        const isActive = item.classList.contains('active');
        const allItems = modalBody.querySelectorAll('.accordion-item');
        allItems.forEach(i => {
          i.classList.remove('active');
          const sp = i.querySelector('.accordion-header span');
          if(sp) sp.textContent = '+';
        });
        if (!isActive) {
          item.classList.add('active');
          indicator.textContent = '-';
        }
      });
      
      item.appendChild(header);
      item.appendChild(content);
      return item;
    }

    // When a node is clicked, animate and open the modal with its content
    cy.on('tap', 'node', function(evt){
      const nodeId = this.id();
      // Animate pan and zoom to the clicked node
      cy.animate({
        center: { eles: this },
        zoom: 2,
        duration: 500
      });
      const contentData = sectionContent[nodeId];
      if (contentData) {
        modalHeader.textContent = contentData.header;
        modalBody.innerHTML = '';
        contentData.concepts.forEach(concept => {
          modalBody.appendChild(createAccordionItem(concept));
        });
        modal.classList.add('active');
      }
    });
  </script>
</body>
</html>